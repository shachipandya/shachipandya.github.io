<!DOCTYPE html>
<html>
  <head>
  <!-- Basic Page Needs -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <title>Rewriting the Bonescript for BeagleBone - Style Shachi</title>
  <meta name="description" content="Programmer, Designer and Writer">
  <!-- CSS -->

  <link rel="stylesheet" href="/css/base.css" type="text/css" />
  <link rel="stylesheet" href="/css/fresco.css" type="text/css" />

<!--
  <script type="text/javascript" src="/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="/js/strip.pkgd.min.js"></script>
<link rel="stylesheet" type="text/css" href="/css/strip.css"/>
-->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54750582-1', 'auto');
  ga('send', 'pageview');

</script>

  <!--[if lt IE 9]>
    <script src="/js/html5shiv.js"></script>
  <![endif]-->
  </head>

  <body>
    <header id="top">

      <!--<div class="animated-color-line">
        <div class="colors">
          <div class="color-part one-bg"></div>
          <div class="color-part two-bg"></div>
          <div class="color-part three-bg"></div>
          <div class="color-part four-bg"></div>
        </div>
      </div>-->

      <div class="container animated fadeIn">
        <div class="fadeInDown animated" style="margin-top: .7rem;">
<nav>
  <ul style="padding-left: 0rem;">
    <li>
      <a href="/">Home</a>
    </li>
    <li >
      <a href="/chaniya-choli/">Chaniya Choli</a>
    </li>
    <li >
      <a href="/collection-2/">Collection-2</a>
    </li>
    <li >
      <a href="/blouses/">Blouses</a>
    </li>
    <li >
      <a href="/contact/">Contact</a>
    </li>
  </ul>
</nav></div>

      </div>
    </header>

    <div class="container animated fadeInUp">
      <article>
          
          <h1 class="article-title">Rewriting the Bonescript for BeagleBone</h1>
          
          <h5 class="article-subtitle"></h5>



        <p>So this has been a code-heavy week for us at <a href="http://theoctal.com">Octal</a>.</p>

<p><figure class="minified">
    <img src="/images/bbblack.jpg" width="50%" height="50%">
    <figcaption></figcaption>
</figure></p>

<p>We have been working on controlling physical objects with the very capable BeagleBone Black. There&rsquo;s a JavaScript library written for the BeagleBoard named <a href="https://github.com/jadonk/bonescript">bonescript</a> by <a href="http://twitter.com/jadon">Jason Kridner</a>. That is what we are using from the beginning for our purpose. We want to control outputs with inputs given through a software interface. The outputs need to be controlled by the BeagleBone. We needed GPIO pins for those outputs. The BeagleBone Black has 65 GPIO pins on it in total. For our purpose, we needed at least 54.</p>

<p>Unfortunately, setting up GPIO pins as outputs is not as simple as on the Arduino. BeagleBone requires a bit of trickery to have those GPIO pins properly ready and available. Initially as my fellow programmer Aditya describes <a href="http://aditya.patadia.org/2014/05/octalbonescript.html">here</a>, defining GPIO pins as output pins with the <code>setPinmode</code> function kept throwing errors. Some of the pins were failing to be configured as output. That left us with less than 54 pins for use as GPIO.</p>

<a name="The.HDMI.cape.problem"></a>
<h3>The HDMI cape problem</h3>

<p>We discovered that there&rsquo;s a pool of pins that are used for the HDMI port on the board. Those pins cannot be reconfigured without disabling the HDMI cape (<a href="http://elinux.org/Beagleboard:Weather_Cape_Work-Around">as shown here</a>). So there&rsquo;s that with those pins. It&rsquo;s rather trivial to make those pins available even though it&rsquo;s very unintuitive. <strong>Here&rsquo;s the tip: open the</strong> <code>uEnv.txt</code> <strong>file on the root of your board and uncomment the HDMI cape line. Then reboot the board, and you have those HDMI pins available straightaway.</strong></p>

<p>Moving on. We needed even more. After spending more than 10 nights on this, we found out that the existing <a href="https://github.com/jadonk/bonescript">bonescript</a> code had a few issues which prevented us from setting those pins and was also bringing in a slew of problems in the efficient execution of the code. We decided to take matters in our own hands - forked the repo and started working on it.</p>

<p>A range of improvements followed in the original bonescript code. Overall, Aditya did a lot of work on the JavaScript source code and made it better in many ways (<a href="http://aditya.patadia.org/2014/05/octalbonescript.html">read all the improvements on his original article</a>). And finally, we decided to release the rewritten bonescript as our own improved release.</p>

<p>With this new OctalBonescript, you can have all possible GPIO pins at your disposal barring the eMMC pins which are not possible to be used as GPIO. <strong>The unusable pins are 3 to 6 and 20 to 25 on P8.</strong> Effectively, we can have 65 - 10 = 55 pins. Just works for us!</p>

<a name="Final.pin.diagram.for.your.reference"></a>
<h2>Final pin diagram for your reference</h2>

<p><figure class="minified">
    <img src="/images/bbbpins.jpg">
    <figcaption></figcaption>
</figure></p>

<a name="Brand.new.Octalbonescript"></a>
<h2>Brand new Octalbonescript</h2>

<p>Get it here: <a href="https://github.com/theoctal/octalbonescript">theoctal/octalbonescript</a></p>

<p>It works and has been tested on BeagleBone Black Rev B and Rev C. It installs <a href="http://socket.io">socket.io</a> and <a href="http://expressjs.com">Express.js</a> as dependencies. It&rsquo;s also Mac OS X ready for your testing when you don&rsquo;t have the BeagleBone with you.</p>

<p>To install it as a Node.js package: <code>npm install octalbonescript</code>.</p>

      </article>
      <span class="article-date">Published on May 4, 2014.</span>
      <br />
      <div class="epilogue">
        <h4 style="color: #999; margin: 0 0 .55rem 0;">Epilogue</h4>

        <p>Thanks for reading the article! There's <a href="/blog">plenty more to read</a> if you liked this one. My company also develops <a href="https://www.npmjs.org/package/octalbonescript">Octalbonescript</a> and has <a href="http://github.com/theoctal/octalbonescript">open-sourced</a> it. My work/interest aligns towards jQuery, Node.js, AJAX, AngularJS, front-end web-development and software-hardware system design.</p>

        <p>For any questions on open-source hardware, software development and any other projects, reach out on <a href="mailto:hardik@hardik.org">hardik@hardik.org</a> or tweet (<a href="http://twitter.com/hvpandya">@hvpandya</a>) me.</p>

        <p>Subscribe to articles via this <a href="http://hardik.org/feed.xml">RSS feed</a>.</p>
      </div>


      <!--<div class="prev_next post_nav">
        
        <p class="previous"><a href="/blog/open-source-livenote" rel="previous" title="LiveNote is open source">← Previous article</a></p>

         
        <p class="next"> <a href="/blog/career-advice" rel="next" title="Zen career advice">Next article →</a></p> 
      </div>-->
    </div>
    <br>
    <footer>
    <div class="container">
    <div>&copy; 2015 Shachi Pandya.</div></div>

  </footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script type="text/javascript" src="/js/fresco.js"></script>
  <script type="text/javascript" src="/js/script.js"></script>
  </body>
</html>
